!function(e){var t={};function n(a){if(t[a])return t[a].exports;var r=t[a]={i:a,l:!1,exports:{}};return e[a].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(a,r,function(t){return e[t]}.bind(null,r));return a},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=5)}([function(e,t){e.exports=React},function(e,t){e.exports=RChainToken},function(e,t){e.exports=ReactRedux},function(e,t){e.exports=ReactDOM},function(e,t){e.exports=Redux},function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(3),c=n.n(o),i=n(2),l=n(4);function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){f(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var p={registryUri:void 0,publicKey:void 0,nonce:void 0,tokensData:void 0,bags:void 0,bagsData:void 0,tab:void 0,loading:!1},y=Object(l.createStore)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1?arguments[1]:void 0;switch(console.log(t),t.type){case"INIT":return s(s({},e),{},{registryUri:t.payload.registryUri,publicKey:t.payload.publicKey});case"SET_LOADING":return s(s({},e),{},{loading:t.payload});case"INIT_TOKEN":return s(s({},e),{},{publicKey:t.payload.publicKey,locked:t.payload.locked,nonce:t.payload.nonce,tokensData:t.payload.tokensData,bags:t.payload.bags,bagsData:t.payload.bagsData,loading:!1});case"UPDATE_NONCE":return s(s({},e),{},{nonce:t.payload});case"CHANGE_TAB":return s(s({},e),{},{tab:t.payload});case"IDENTIFIED":return s(s({},e),{},{identified:!0});case"UPDATE_NONCE":return s(s({},e),{},{nonce:t.payload});default:return e}})),b=n(1);function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=k(e);if(t){var r=k(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return E(this,n)}}function E(e,t){return!t||"object"!==d(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function k(e){return(k=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var O=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(c,e);var t,n,a,o=v(c);function c(){return m(this,c),o.apply(this,arguments)}return t=c,(n=[{key:"render",value:function(){var e=this;return!this.registryUri&&this.props.registryUri&&(this.registryUri=this.props.registryUri),r.a.createElement("div",{className:"form horizontal form-horizontal"},r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"control"},r.a.createElement("input",{onChange:function(t){return e.registryUri=t.target.value},className:"input registry-uri-input",type:"text",placeholder:"Registry URI",defaultValue:this.props.registryUri}),this.props.loading?r.a.createElement("button",{disabled:!0,type:"button",className:"button is-light"},"Loading"):r.a.createElement("button",{onClick:function(){e.props.loadToken({registryUri:e.registryUri})},type:"button",className:"button is-light"},this.props.registryUri?"Reload":"Load"))))}}])&&g(t.prototype,n),a&&g(t,a),c}(r.a.Component);function N(e){return(N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function w(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function S(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function j(e,t){return(j=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function T(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=R(e);if(t){var r=R(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return D(this,n)}}function D(e,t){return!t||"object"!==N(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function R(e){return(R=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var _=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&j(e,t)}(i,e);var t,n,o,c=T(i);function i(){return w(this,i),c.apply(this,arguments)}return t=i,(n=[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,!0===this.props.locked?r.a.createElement(a.Fragment,null,r.a.createElement("h4",{className:"title is-5 locked-t"},"This contract is"," ",r.a.createElement("span",{className:"tag is-success is-medium"},"locked")),r.a.createElement("p",{className:"locked-p"},"The owner cannot add tokens or change existing tokens data anymore.",r.a.createElement("br",null),r.a.createElement("br",null))):void 0,!1===this.props.locked?r.a.createElement(a.Fragment,null,r.a.createElement("h4",{className:"title is-5 locked-t"},"This contract is"," ",r.a.createElement("span",{className:"tag is-danger is-medium"},"not locked")),r.a.createElement("p",{className:"locked-p"},"The owner ",r.a.createElement("b",null,this.props.publicKey)," can still add tokens, and change existing tokens data.",r.a.createElement("br",null),r.a.createElement("br",null))):void 0,r.a.createElement("b",null,"Tokens data"),r.a.createElement("div",{className:"tokens-data"},Object.keys(this.props.tokensData).map((function(t){return r.a.createElement(a.Fragment,{key:t},r.a.createElement("span",null,t," (token ID):"," ",e.props.tokensData[t].length>200?"".concat(e.props.tokensData[t].substr(0,200),"..."):e.props.tokensData[t]),r.a.createElement("hr",null))}))),r.a.createElement("b",null,"Token ownerships / bags"),r.a.createElement("div",{className:"bags"},Object.keys(this.props.bags).map((function(t){return r.a.createElement(a.Fragment,{key:t},r.a.createElement("div",{className:"bag"},r.a.createElement("span",null,"token ID : ",e.props.bags[t].n),r.a.createElement("span",null,"bag ID : ",t),r.a.createElement("span",null,"quantity : ",e.props.bags[t].quantity),r.a.createElement("span",null,"public key : ",e.props.bags[t].publicKey),r.a.createElement("span",null,"price (per token) : ",e.props.bags[t].price)),r.a.createElement("hr",null))}))))}}])&&S(t.prototype,n),o&&S(t,o),i}(r.a.Component);function C(e){return(C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function P(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function U(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function I(e,t){return(I=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function x(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=B(e);if(t){var r=B(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return A(this,n)}}function A(e,t){return!t||"object"!==C(t)&&"function"!=typeof t?K(e):t}function K(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function B(e){return(B=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function q(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var G=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&I(e,t)}(c,e);var t,n,a,o=x(c);function c(){var e;P(this,c);for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return q(K(e=o.call.apply(o,[this].concat(n))),"state",{n:0}),q(K(e),"reload",(function(t){t.preventDefault(),e.setState({n:e.state.n+1})})),e}return t=c,(n=[{key:"render",value:function(){if("undefined"==typeof dappyStore)return console.warn("window.dappyStore is undefined, cannot lock contract"),r.a.createElement("div",null);var e=dappyStore.getState().transactions;return r.a.createElement("div",null,r.a.createElement("h4",{className:"title is-4"},"Transactions"," ",r.a.createElement("button",{className:"button is-light is-small",onClick:this.reload},"Reload")),r.a.createElement("p",null,"If you deployed a new rchain-tokenERC-1155 contract, reload this section until see the registry URI displayed."),r.a.createElement("br",null),r.a.createElement("ul",null,Object.keys(e).map((function(t){var n;return console.log(e[t]),"string"==typeof e[t].value?n=e[t].value:e[t].value.registryUri?n="registry URI : ".concat(e[t].value.registryUri.replace("rho:id:","")):e[t].value.status&&(n="status : ".concat(e[t].value.status)),r.a.createElement("li",{key:t},t,": ",n)}))))}}])&&U(t.prototype,n),a&&U(t,a),c}(r.a.Component);function H(e){return(H="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function L(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function V(e,t){return(V=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function J(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=F(e);if(t){var r=F(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return z(this,n)}}function z(e,t){return!t||"object"!==H(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function F(e){return(F=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var M='{ "name": "pizza regina" }',Q=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&V(e,t)}(c,e);var t,n,a,o=J(c);function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=o.call(this,e)).textarea=r.a.createRef(),t.state={token:void 0,data:M},t}return t=c,(n=[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("h4",{className:"title is-4"},"Update token data"),r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Token to update"),r.a.createElement("div",{className:"control"},r.a.createElement("div",{class:"select"},r.a.createElement("select",{onChange:function(t){"Select a token"===t.target.value?(e.textarea.current.value="",e.setState({token:void 0})):(console.log(e.textarea.current),e.textarea.current.value=e.props.tokensData[t.target.value],e.setState({token:t.target.value,data:e.props.tokensData[t.target.value]}))}},r.a.createElement("option",{value:void 0},"Select a token"),Object.keys(this.props.tokensData).map((function(t){return r.a.createElement("option",{disabled:0===e.props.tokensData[t],key:t,value:t},t)})))))),r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Data"),r.a.createElement("p",{className:"note"},r.a.createElement("b",null,"Note: "),"Data will be stored as a string, and secured with"," ",r.a.createElement("b",null,"encodeURI()")),r.a.createElement("div",{className:"control"},r.a.createElement("textarea",{className:"textarea",ref:this.textarea,onChange:function(t){e.setState({data:t.target.value})},defaultValue:M}))),r.a.createElement("div",{className:"field"},r.a.createElement("button",{className:"button is-light",type:"button",disabled:"string"!=typeof this.state.token,onClick:function(t){e.props.updateTokenData({registryUri:e.props.registryUri,n:e.state.token,data:e.state.data})}},"Update data")))}}])&&L(t.prototype,n),a&&L(t,a),c}(r.a.Component);function W(e){return(W="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function X(e,t){return(X=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Z(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=ne(e);if(t){var r=ne(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return ee(this,n)}}function ee(e,t){return!t||"object"!==W(t)&&"function"!=typeof t?te(e):t}function te(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ne(e){return(ne=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ae(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var re=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&X(e,t)}(c,e);var t,n,a,o=Z(c);function c(){var e;Y(this,c);for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return ae(te(e=o.call.apply(o,[this].concat(n))),"state",{n:"pizza",price:1,quantity:10,data:M}),e}return t=c,(n=[{key:"render",value:function(){var e=this;return console.log(this.state),r.a.createElement("div",null,r.a.createElement("h4",{className:"title is-4"},"Create token(s)"),r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Data (token data)"),r.a.createElement("div",{className:"control"},r.a.createElement("textarea",{className:"textarea",onChange:function(t){e.setState({data:t.target.value})},defaultValue:M}))),r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Token ID / token type"),r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:"input",onChange:function(t){return e.setState({n:t.target.value})},type:"text",defaultValue:"pizza"}))),r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Price (dusts)"),r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:"input",onChange:function(t){return e.setState({price:parseInt(t.target.value)})},type:"number",placeholder:"1",step:1,min:1,defaultValue:1}))),r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Quantity"),r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:"input",onChange:function(t){return e.setState({quantity:parseInt(t.target.value)})},type:"number",placeholder:"10",step:1,min:0,defaultValue:10}))),"number"==typeof this.state.quantity&&"number"==typeof this.state.price?r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Bag total value (dusts) ",this.state.price*this.state.quantity)):void 0,r.a.createElement("div",{className:"field"},r.a.createElement("button",{className:"button is-light",type:"button",onClick:function(t){e.props.createToken({registryUri:e.props.registryUri,n:e.state.n,data:e.state.data||void 0,price:e.state.price,quantity:e.state.quantity})}},"Create token(s)")))}}])&&$(t.prototype,n),a&&$(t,a),c}(r.a.Component);function oe(e){return(oe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ce(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ie(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function le(e,t){return(le=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ue(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=fe(e);if(t){var r=fe(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return se(this,n)}}function se(e,t){return!t||"object"!==oe(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function fe(e){return(fe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var pe=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&le(e,t)}(c,e);var t,n,a,o=ue(c);function c(){return ce(this,c),o.apply(this,arguments)}return t=c,(n=[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("h4",{className:"title is-4"},"Lock contract"),r.a.createElement("article",{className:"message is-danger"},r.a.createElement("div",{className:"message-body"},"If you lock the contract, the tokens currently existing will be the only ones to ever exist for this contract. The only available operations available will be :",r.a.createElement("ul",null,r.a.createElement("li",null,"- Send tokens (as the owner of a bag)."),r.a.createElement("li",null,"- Defining a price for tokens in a bag (as the owner of a bag)."),r.a.createElement("li",null,"- Update data associated to a bag (as the owner of a bag)."),r.a.createElement("li",null,"- Buy a set of tokens from a bag.")))),r.a.createElement("div",{className:"field"},r.a.createElement("button",{className:"button is-danger",type:"button",onClick:function(t){e.props.setLocked({registryUri:e.props.registryUri})}},"Lock contract")))}}])&&ie(t.prototype,n),a&&ie(t,a),c}(r.a.Component);function ye(e){return(ye="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function be(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function de(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function me(e,t){return(me=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ge(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=ve(e);if(t){var r=ve(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return he(this,n)}}function he(e,t){return!t||"object"!==ye(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ve(e){return(ve=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ee=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&me(e,t)}(c,e);var t,n,a,o=ge(c);function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=o.call(this,e)).state={bagId:void 0,publicKey:""},t}return t=c,(n=[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("h4",{className:"title is-4"},"Send token(s)"),r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"From (bag you own)"),r.a.createElement("div",{className:"control"},r.a.createElement("div",{class:"select"},r.a.createElement("select",{onChange:function(t){"Select a bag"===t.target.value?e.setState({bagId:void 0}):e.setState({bagId:t.target.value})}},r.a.createElement("option",{value:void 0},"Select a bag"),Object.keys(this.props.bags).map((function(t){return r.a.createElement("option",{disabled:0===e.props.bags[t],key:t,value:t},t)})))))),r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"To (public key)"),r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:"input",type:"text",onInput:function(t){e.setState({publicKey:t.target.value})}}))),r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Amount / Quantity of tokens to send"),this.state.bagId?r.a.createElement("p",{className:"text-warning"},"The selected bag contains"," ",this.props.bags[this.state.bagId].quantity," token(s)"):void 0,r.a.createElement("div",{className:"control"},r.a.createElement("input",{type:"number",className:"input",min:0,onInput:function(t){e.setState({quantity:parseInt(t.target.value)})}}))),r.a.createElement("div",{className:"field"},r.a.createElement("button",{className:"button is-light",type:"button",disabled:"string"!=typeof this.state.bagId||"number"!=typeof this.state.quantity,onClick:function(t){var n;e.props.sendTokens((be(n={publicKey:e.props.publicKey,registryUri:e.props.registryUri},"publicKey",e.state.publicKey),be(n,"nonce",e.props.bags[e.state.bagId].nonce),be(n,"bagId",e.state.bagId),be(n,"quantity",e.state.quantity),n))}},"Send token(s)")))}}])&&de(t.prototype,n),a&&de(t,a),c}(r.a.Component);function ke(e){return(ke="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Oe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ne(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function we(e,t){return(we=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Se(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=De(e);if(t){var r=De(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return je(this,n)}}function je(e,t){return!t||"object"!==ke(t)&&"function"!=typeof t?Te(e):t}function Te(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function De(e){return(De=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Re(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var _e=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&we(e,t)}(c,e);var t,n,a,o=Se(c);function c(){var e;Oe(this,c);for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return Re(Te(e=o.call.apply(o,[this].concat(n))),"state",{bagId:void 0,quantity:0,data:""}),e}return t=c,(n=[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("h4",{className:"title is-4"},"Purchase token(s)"),r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Token ownership / bag to buy from"),r.a.createElement("div",{className:"control"},r.a.createElement("div",{class:"select"},r.a.createElement("select",{onChange:function(t){"Select a bag"===t.target.value?e.setState({bagId:void 0}):e.setState({bagId:t.target.value})}},r.a.createElement("option",{value:void 0},"Select a bag"),Object.keys(this.props.bags).filter((function(t){return"number"==typeof e.props.bags[t].price})).map((function(t){return r.a.createElement("option",{disabled:0===e.props.bags[t],key:t,value:t},t)})))))),r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Quantity","string"==typeof this.state.bagId?"(available: ".concat(this.props.bags[this.state.bagId].quantity,")"):""),r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:"input",onChange:function(t){return e.setState({quantity:parseInt(t.target.value)})},type:"number",placeholder:"1",step:1,min:0}))),r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Data (token data)"),r.a.createElement("div",{className:"control"},r.a.createElement("textarea",{className:"textarea",onChange:function(t){e.setState({data:t.target.value})},defaultValue:""}))),"string"==typeof this.state.bagId?r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Price (total)"," ",this.props.bags[this.state.bagId].price*this.state.quantity)):void 0,r.a.createElement("div",{className:"field"},r.a.createElement("button",{disabled:"string"!=typeof this.state.bagId||!this.state.quantity,className:"button is-light",type:"button",onClick:function(t){e.props.purchaseToken({publicKey:e.props.publicKey,registryUri:e.props.registryUri,bagId:e.state.bagId,data:e.state.data,price:e.props.bags[e.state.bagId].price,quantity:e.state.quantity})}},"Purchase token(s)")))}}])&&Ne(t.prototype,n),a&&Ne(t,a),c}(r.a.Component);function Ce(e){return(Ce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Pe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ue(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function Ie(e,t){return(Ie=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function xe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Ke(e);if(t){var r=Ke(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Ae(this,n)}}function Ae(e,t){return!t||"object"!==Ce(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ke(e){return(Ke=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Be=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ie(e,t)}(c,e);var t,n,a,o=xe(c);function c(){return Pe(this,c),o.apply(this,arguments)}return t=c,(n=[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("h4",{className:"title is-4"},"Deploy new rchain-token contract"),r.a.createElement("p",null,"After deployment, go in the ",r.a.createElement("u",null,"Transactions")," section and wait for the registry URI to pop.",r.a.createElement("br",null),r.a.createElement("br",null)),r.a.createElement("div",{className:"field"},r.a.createElement("button",{className:"button is-medium is-primary",type:"button",onClick:function(t){e.props.deploy({publicKey:e.props.publicKey})}},"Deploy")))}}])&&Ue(t.prototype,n),a&&Ue(t,a),c}(r.a.Component);function qe(e){return(qe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ge(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function He(e,t){return(He=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Le(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Je(e);if(t){var r=Je(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Ve(this,n)}}function Ve(e,t){return!t||"object"!==qe(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Je(e){return(Je=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ze=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&He(e,t)}(c,e);var t,n,a,o=Le(c);function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=o.call(this,e)).textarea=r.a.createRef(),t.state={bagId:void 0,data:'{ "color": "blue" }'},t}return t=c,(n=[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("h4",{className:"title is-4"},"Update bag data"),r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Token ownership / bag to update"),r.a.createElement("div",{className:"control"},r.a.createElement("div",{class:"select"},r.a.createElement("select",{onChange:function(t){"Select a bag"===t.target.value?(e.textarea.current.value="",e.setState({bagId:void 0})):(e.props.bagsData[t.target.value]?e.textarea.current.value=e.props.bagsData[t.target.value]:e.textarea.current.value="",e.setState({bagId:t.target.value,data:e.props.bagsData[t.target.value]||""}))}},r.a.createElement("option",{value:void 0},"Select a bag"),Object.keys(this.props.bags).map((function(t){return r.a.createElement("option",{disabled:0===e.props.bagsData[t],key:t,value:t},t)})))))),r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Data"),r.a.createElement("p",{className:"note"},r.a.createElement("b",null,"Note: "),"Data will be stored as a string, and secured with"," ",r.a.createElement("b",null,"encodeURI()")),r.a.createElement("div",{className:"control"},r.a.createElement("textarea",{className:"textarea",ref:this.textarea,onInput:function(t){e.setState({data:t.target.value})},defaultValue:'{ "color": "blue" }'}))),r.a.createElement("div",{className:"field"},r.a.createElement("button",{className:"button is-light",type:"button",disabled:"string"!=typeof this.state.bagId,onClick:function(t){e.props.updateBagData({registryUri:e.props.registryUri,nonce:e.props.bags[e.state.bagId].nonce,bagId:e.state.bagId,data:e.state.data})}},"Update data")))}}])&&Ge(t.prototype,n),a&&Ge(t,a),c}(r.a.Component);function Fe(e){return(Fe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Me(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Qe(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function We(e,t){return(We=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ye(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Xe(e);if(t){var r=Xe(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return $e(this,n)}}function $e(e,t){return!t||"object"!==Fe(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Xe(e){return(Xe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ze=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&We(e,t)}(i,e);var t,n,o,c=Ye(i);function i(){return Me(this,i),c.apply(this,arguments)}return t=i,(n=[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("b",null,"Bags data"),r.a.createElement("div",{className:"tokens-data"},Object.keys(this.props.bagsData).map((function(t){return r.a.createElement(a.Fragment,{key:t},r.a.createElement("span",null,t," (bag ID) :"," ",e.props.bagsData[t].length>200?"".concat(e.props.bagsData[t].substr(0,200),"..."):e.props.bagsData[t]),r.a.createElement("hr",null))}))))}}])&&Qe(t.prototype,n),o&&Qe(t,o),i}(r.a.Component);function et(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],a=!0,r=!1,o=void 0;try{for(var c,i=e[Symbol.iterator]();!(a=(c=i.next()).done)&&(n.push(c.value),!t||n.length!==t);a=!0);}catch(e){r=!0,o=e}finally{try{a||null==i.return||i.return()}finally{if(r)throw o}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return tt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return tt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function tt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var nt=Object(i.connect)((function(e){return{loading:e.loading,tokensData:e.tokensData,bags:e.bags,bagsData:e.bagsData,tab:e.tab,registryUri:e.registryUri,nonce:e.nonce,publicKey:e.publicKey,locked:e.locked}}),(function(e,t){return{goCreateToken:function(){e({type:"CHANGE_TAB",payload:"creatingToken"})},goUpdateTokenData:function(){e({type:"CHANGE_TAB",payload:"updatingTokenData"})},goUpdateBagData:function(){e({type:"CHANGE_TAB",payload:"updatingBagData"})},goSeeBagsData:function(){e({type:"CHANGE_TAB",payload:"seeingBagsData"})},goPurchase:function(){e({type:"CHANGE_TAB",payload:"purchasing"})},goDashboard:function(){e({type:"CHANGE_TAB",payload:void 0})},goDeploy:function(){e({type:"CHANGE_TAB",payload:"deploying"})},goSend:function(){e({type:"CHANGE_TAB",payload:"sending"})},goTransactions:function(){e({type:"CHANGE_TAB",payload:"transactions"})},goSetLocked:function(){e({type:"CHANGE_TAB",payload:"locking"})},setLocked:function(n){console.log(n);var a=blockchainUtils.generateNonce();if("undefined"!=typeof dappyRChain){var r={nonce:t.nonce,newNonce:a},o=blockchainUtils.toByteArray(r),c=Object(b.setLockedTerm)(n.registryUri,r,"SIGN");dappyRChain.transaction({term:c,signatures:{SIGN:blockchainUtils.uInt8ArrayToHex(o)}}).then((function(t){console.log(t),e({type:"UPDATE_NONCE",payload:a})}))}else console.warn("window.dappyRChain is undefined, cannot lock contract")},updateTokenData:function(n){console.log(n);var a=blockchainUtils.generateNonce();if("undefined"!=typeof dappyRChain){var r={nonce:t.nonce,newNonce:a,n:n.n,data:n.data?encodeURI(n.data):void 0},o=blockchainUtils.toByteArray(r),c=Object(b.updateTokenDataTerm)(n.registryUri,r,"SIGN");dappyRChain.transaction({term:c,signatures:{SIGN:blockchainUtils.uInt8ArrayToHex(o)}}).then((function(t){console.log(t),e({type:"UPDATE_NONCE",payload:blockchainUtils.uInt8ArrayToHex(o)})}))}else console.warn("window.dappyRChain is undefined, cannot create token")},updateBagData:function(e){console.log(e);blockchainUtils.generateNonce();if("undefined"!=typeof dappyRChain){var t={nonce:getNonce(),newNonce:e.newNonce,bagId:e.bagId,data:e.data?encodeURI(e.data):void 0},n=blockchainUtils.toByteArray(t),a=Object(b.updateBagDataTerm)(e.registryUri,t,"SIGN");dappyRChain.transaction({term:a,signatures:{SIGN:blockchainUtils.uInt8ArrayToHex(n)}}).then((function(e){console.log(e)}))}else console.warn("window.dappyRChain is undefined, cannot create token")},sendTokens:function(e){console.log(e);var t=blockchainUtils.generateNonce(),n=blockchainUtils.generateNonce();if("undefined"!=typeof dappyRChain){var a={nonce:getNonce(),bagNonce:t,bagNonce2:n,bagId:e.bagId,quantity:e.quantity,publicKey:e.publicKey,data:void 0},r=blockchainUtils.toByteArray(a),o=Object(b.sendTokensTerm)(e.registryUri,a,"SIGN");dappyRChain.transaction({term:o,signatures:{SIGN:blockchainUtils.uInt8ArrayToHex(r)}}).then((function(e){console.log(e)}))}else console.warn("window.dappyRChain is undefined, cannot create token")},createToken:function(n){console.log("OWNPROPD",t),console.log(n);var a=blockchainUtils.generateNonce(),r=blockchainUtils.generateNonce();if("undefined"!=typeof dappyRChain){var o={nonce:t.nonce,bagNonce:r,publicKey:n.publicKey,data:n.data?encodeURI(n.data):void 0,n:n.n,newNonce:a,price:n.price,quantity:n.quantity},c=blockchainUtils.toByteArray(o),i=Object(b.createTokensTerm)(n.registryUri,o,"SIGN");dappyRChain.transaction({term:i,signatures:{SIGN:blockchainUtils.uInt8ArrayToHex(c)}}).then((function(t){console.log(t),e({type:"UPDATE_NONCE",payload:a})}))}else console.warn("window.dappyRChain is undefined, cannot create token")},purchaseToken:function(e){console.log(e);var t=blockchainUtils.generateNonce();if("undefined"!=typeof dappyRChain){var n=Object(b.purchaseTokensTerm)(e.registryUri,{publicKey:e.publicKey,bagId:e.bagId,quantity:e.quantity,price:e.price,bagNonce:t,data:e.data});dappyRChain.transaction({term:n,signatures:{}}).then((function(e){console.log(e)}))}else console.warn("window.dappyRChain is undefined, cannot purchase token")},loadToken:function(t){var n;(console.log(t),"undefined"!=typeof dappyRChain)?(e({type:"SET_LOADING",payload:!0}),(n=t.registryUri,new Promise((function(e,t){dappyRChain.exploreDeploys([Object(b.read)(n),Object(b.readBagsOrTokensDataTerm)(n,"tokens"),Object(b.readBagsOrTokensDataTerm)(n,"bags"),Object(b.readBagsTerm)(n)]).then((function(t){var n=JSON.parse(t).results,a=blockchainUtils.rhoValToJs(JSON.parse(n[0].data).expr[0]),r=a.nonce,o=a.locked,c=a.publicKey,i=blockchainUtils.rhoValToJs(JSON.parse(n[1].data).expr[0]);console.log("tokensData"),console.log(i);var l={};Object.keys(i).forEach((function(e){l[e]=decodeURI(i[e])}));var u=blockchainUtils.rhoValToJs(JSON.parse(n[3].data).expr[0]);console.log("bags"),console.log(u);var s=blockchainUtils.rhoValToJs(JSON.parse(n[2].data).expr[0]);console.log("bagsData"),console.log(s);var f={};Object.keys(s).forEach((function(e){f[e]=decodeURI(s[e])})),e({publicKey:c,nonce:r,locked:o,tokensData:l,bags:u,bagsData:f})})).catch((function(e){t(e)}))}))).then((function(t){e({type:"INIT_TOKEN",payload:t})})).catch((function(e){console.error("Something went wrong when loading data"),console.log(e)}))):console.warn("window.dappyRChain is undefined, cannot fetch data")},deploy:function(t){var n=blockchainUtils.generateNonce();"undefined"!=typeof dappyRChain?dappyRChain.transaction({term:Object(b.mainTerm)(n,t.publicKey),signatures:{}}).then((function(t){console.log(t),e({type:"UPDATE_NONCE",payload:n})})):console.warn("window.dappyRChain is undefined, cannot create token")}}}))((function(e){var t=et(Object(a.useState)(void 0),2),n=t[0],o=t[1],c=e.bags&&e.tokensData&&e.registryUri,i=void 0===e.tab;return r.a.createElement("div",{className:"container"},r.a.createElement("h2",{className:"title is-2"},"rchain-token manager"),r.a.createElement("div",{className:"columns left-menu"},r.a.createElement("div",{className:"column is-one-quarter"},r.a.createElement("div",{className:"menu"},r.a.createElement("ul",{className:"menu-list"},r.a.createElement("li",null," ",r.a.createElement("a",{className:"",onClick:function(t){e.goDashboard()}},"Dashboard")),r.a.createElement("li",null," ",r.a.createElement("a",{className:"",onClick:function(t){e.goDeploy()}},"Deploy")),r.a.createElement("li",null," ",r.a.createElement("a",{className:"",onClick:function(t){e.goTransactions()}},"Transactions")),c?r.a.createElement(a.Fragment,null,r.a.createElement("li",null,r.a.createElement("a",{onClick:function(t){e.goPurchase()}},"Purchase token(s)")),r.a.createElement("li",null,r.a.createElement("a",{className:e.locked?"is-static":"",title:"Contract is locked, cannot create token",onClick:function(t){e.locked||e.goCreateToken()}},"Create token(s)")),r.a.createElement("li",null,r.a.createElement("a",{onClick:function(t){e.goSend()}},"Send token(s)")),r.a.createElement("li",null,r.a.createElement("a",{className:e.locked?"is-static":"",title:"Contract is locked, cannot update token data",onClick:function(t){e.locked||e.goUpdateTokenData()}},"Update token data")),r.a.createElement("li",null,r.a.createElement("a",{onClick:function(t){e.goUpdateBagData()}},"Update bag data")),r.a.createElement("li",null,r.a.createElement("a",{onClick:function(t){e.goSeeBagsData()}},"See bags data")),r.a.createElement("li",null,r.a.createElement("a",{className:e.locked?"is-static":"",title:"Contract is locked, cannot lock",onClick:function(t){e.locked||e.goSetLocked()}},"Lock contract"))):void 0))),r.a.createElement("div",{className:"column is-three-quarters"},i?r.a.createElement(O,{loadToken:function(t){o(t.registryUri),e.loadToken(t)},registryUri:n,loading:e.loading}):void 0,"transactions"===e.tab?r.a.createElement(G,null):void 0,"creatingToken"===e.tab?r.a.createElement(re,{registryUri:n,createToken:e.createToken}):void 0,"sending"===e.tab?r.a.createElement(Ee,{registryUri:n,bags:e.bags,publicKey:e.publicKey,sendTokens:e.sendTokens}):void 0,"purchasing"===e.tab?r.a.createElement(_e,{registryUri:n,purchaseToken:e.purchaseToken,publicKey:e.publicKey,bags:e.bags}):void 0,"updatingTokenData"===e.tab?r.a.createElement(Q,{registryUri:n,updateTokenData:e.updateTokenData,tokensData:e.tokensData}):void 0,"seeingBagsData"===e.tab?r.a.createElement(Ze,{bagsData:e.bagsData}):void 0,"updatingBagData"===e.tab?r.a.createElement(ze,{registryUri:n,updateBagData:e.updateBagData,bagsData:e.bagsData,bags:e.bags}):void 0,"locking"===e.tab?r.a.createElement(pe,{registryUri:n,setLocked:e.setLocked}):void 0,"deploying"===e.tab?r.a.createElement(Be,{deploy:e.deploy,publicKey:e.publicKey}):void 0,c&&i?r.a.createElement(_,{tokensData:e.tokensData,bags:e.bags,publicKey:e.publicKey,locked:e.locked}):void 0)))})),at=function(){return r.a.createElement(i.Provider,{store:y},r.a.createElement(nt,null))};window.onload=function(){c.a.render(r.a.createElement(at,null),document.getElementById("root"))},"undefined"!=typeof dappyRChain&&dappyRChain.fetch("dappy://REGISTRY_URI").then((function(e){var t=JSON.parse(e).expr[0],n=blockchainUtils.rhoValToJs(t);console.log(n),dappyRChain.identify({publicKey:void 0}).then((function(e){e.identified?(y.dispatch({type:"INIT",payload:{registryUri:n.registryUri.replace("rho:id:",""),publicKey:e.publicKey}}),c.a.render(r.a.createElement(at,null),document.getElementById("root"))):console.error("This dapp needs identification")})).catch((function(e){console.error("This dapp needs identification"),console.log(e)}))})).catch((function(e){console.error("Something went wrong when retreiving the files module object"),console.log(e)}))}]);